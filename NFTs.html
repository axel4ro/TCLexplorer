<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NFT Explorer</title>
  <style>
body {
  font-family: 'Segoe UI', Arial, sans-serif;
  background: radial-gradient(circle at top left, #0a0f1c, #050810 80%);
  color: #f1f1f1;
  margin: 0;
  min-height: 100vh;
}

/* === HEADER === */
header {
  background: linear-gradient(90deg, #101729, #141a33);
  padding: 18px 20px;
  display:flex;
  align-items:center;
  justify-content: space-between;  /* üî• logo st√¢nga, nav dreapta */
  flex-wrap:wrap;
  border-bottom: 1px solid #2a3347;
  box-shadow: 0 2px 12px rgba(0,0,0,0.6);
}

h1 {
  margin: 0;
  font-size: 22px;
  color: #2ff6de;
  text-shadow: 0 0 10px rgba(47,246,222,0.8);
}

nav {
  display: flex;
  gap: 10px;
}

nav button,
button {
  background: #2563eb; /* üîµ Solid Blue */
  border: none;
  color: #fff;
  font-weight: bold;
  padding: 10px 18px;
  border-radius: 10px;
  cursor: pointer;
  font-size: 15px;
  letter-spacing: 0.5px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.4);
  transition: all 0.25s ease-in-out;
}

nav button:hover, button:hover {
  background: #1d4ed8;
  transform: translateY(-2px);
  box-shadow: 0 6px 14px rgba(0,0,0,0.6);
}

nav button:active, button:active {
  transform: translateY(0);
  box-shadow: 0 3px 8px rgba(0,0,0,0.4);
}

nav button.active {
  background: #1e40af; /* albastru mai √Ænchis */
  border: 2px solid #00f5d4; /* contur turcoaz */
  box-shadow: 0 0 8px rgba(0, 245, 212, 0.8); /* glow fin */
  transform: scale(1.02);
}

/* === FIX pentru imagine NFT √Æn modal === */
.modal-left img {
  max-width: 100%;
  max-height: 55vh;   /* üî• redus de la 70vh la 55vh */
  object-fit: contain;
}


/* === FIX pentru container modal === */
#modal-content {
  max-height: 85vh;   /* üî• redus de la 90vh la 85vh */
  overflow-y: auto;
}


/* === TOOLBAR SUB HEADER === */
.subbar {
  position: sticky;
  top: 0;
  z-index: 20;
  padding: 12px 20px;
  background: rgba(10,15,28,0.9);
  border-top: 1px solid #2a3347;
  border-bottom: 1px solid #2a3347;
  backdrop-filter: blur(8px);
  display: flex;
  flex-direction: column;   /* üî• pe coloane, ordinea controlatƒÉ de div-uri */
  gap: 10px;
}

.subbar label { color:#9ca3af; }
.subbar select,
.subbar button,
.subbar input {
  margin: 0;
}


.subbar select {
  background:#202840;
  color:#fff;
  border:1px solid #394158;
  border-radius:6px;
  padding:7px 12px;
  font-size:14px;
}

/* === GRID === */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 18px;
  padding: 25px;
}

.card {
  background: #151c2c;
  border-radius: 14px;
  padding: 15px;
  text-align: center;
  cursor: pointer;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 0 10px rgba(0,0,0,0.6);
  border: 1px solid rgba(47,246,222,0.2);
}
.card:hover {
  transform: translateY(-5px) scale(1.03);
  box-shadow: 0 0 15px rgba(47,246,222,0.7),
              0 0 25px rgba(255, 78, 205, 0.5);
  border: 1px solid #ff4ecd;
}

.card img {
  max-width: 100%;
  border-radius: 10px;
  box-shadow: 0 0 8px rgba(0,0,0,0.7);
}

.card h4, .card h3 {
  margin: 10px 0 6px;
  font-size: 16px;
  color: #2ff6de;
  text-shadow: 0 0 6px rgba(47,246,222,0.7);
}

.card p {
  margin: 0;
  font-size: 13px;
  color: #9ca3af;
}

/* === MODAL === */
#modal {
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  color:#fff;
  padding:40px;
  overflow:auto;
  z-index:9999;
  backdrop-filter: blur(5px);
}
#modal-content {
  background:#101729;
  border: 1px solid #2ff6de;
  border-radius:14px;
  padding:20px;
  max-width:900px;
  margin:auto;
  position:relative;
  display: flex;
  gap: 20px;
  box-shadow: 0 0 20px rgba(47,246,222,0.7),
              0 0 35px rgba(255,78,205,0.5);
}

.modal-left {
  flex: 1;
  text-align: center;
}
.modal-left img {
  max-width: 100%;
  border-radius: 10px;
  margin-bottom: 15px;
  box-shadow: 0 0 12px rgba(0,0,0,0.6);
}
.modal-info p {
  margin: 5px 0;
  font-size: 14px;
  color: #9ca3af;
}
.modal-info b {
  color: #2ff6de;
}

.modal-left .view-btn {
  background:#2563eb;
  color:#fff;
  font-weight:bold;
  padding:10px 16px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  display:inline-block;
  margin-top:15px;
  box-shadow:0 4px 10px rgba(0,0,0,0.4);
  transition: all 0.2s ease-in-out;
}
.modal-left .view-btn:hover {
  background:#1d4ed8;
  transform: translateY(-2px);
}

/* === ATTRIBUTES === */
.attr-list { display: flex; flex-direction: column; gap: 10px; margin-top: 15px; }
.attr-item {
  background: #202840;
  border-radius: 8px;     /* üî• mai mic */
  padding: 6px 8px;       /* üî• mai mic */
  font-size: 13px;        /* üî• redus de la 15px */
  box-shadow: 0 0 6px rgba(0,0,0,0.3);
  text-align: center;
  border: 1px solid rgba(255,255,255,0.08);
}

.attr-item strong {
  display: block;
  margin-bottom: 3px;
  color: #2ff6de;
  font-size: 12px;       /* üî• redus */
}

.attr-item span {
  font-weight: 600;
  font-size: 12px;       /* üî• redus */
  color: #f1f1f1;
  display: block;
}


/* === RESPONSIVE === */
@media (max-width: 768px) {
  header {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }

  nav {
    width: 100%;
    justify-content: flex-start;
    flex-wrap: wrap;
  }

  nav button {
    flex: 1 1 auto;
  }

  .subbar {
    flex-direction: column;
    align-items: stretch;
  }

  .subbar input {
    width: 100% !important;
  }

  .grid {
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    padding: 15px;
    gap: 12px;
  }

  /* üî• fix scroll modal pe mobile */
  #modal-content {
    flex-direction: column;
    max-width: 95%;
    padding: 15px;

    max-height: none;      /* fƒÉrƒÉ limitƒÉ */
    overflow-y: visible;   /* fƒÉrƒÉ scroll intern */
  }

  .modal-right {
    flex: unset;
    max-height: none;
    overflow-y: visible;
    padding-right: 0;
  }

  .modal-left img {
    max-height: 40vh;      /* imagine mai micƒÉ */
  }
}


.back-btn {
  display: inline-block;
  padding: 10px 18px;
  border-radius: 6px;
  background: #249c8c;
  color: white;
  font-weight: 600;
  text-decoration: none;
  cursor: pointer;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  box-shadow: 0 4px 10px rgba(0,0,0,0.4);
  transition: transform 0.2s, opacity 0.2s;
}
.back-btn:hover {
  opacity: 0.9;
  transform: translateY(-2px);
}

  </style>
</head>
<body>
<header>
  <div style="display:flex; gap:10px; justify-content:center; align-items:center; flex-wrap:wrap; width:100%;">
    <nav>
    <!-- üîô Back button -->
    <a href="index.html" class="back-btn">‚¨ÖÔ∏è Back to TCL Explorer</a>
    
    <!-- Tabs: Created + Balance -->

  <button class="active" onclick="showSection('created')">üîé Created</button>
  <button onclick="showSection('balance')">‚öñÔ∏è Balance</button>
</nav>

  </div>
</header>


  <!-- NEW: toolbar SUB header (Back + filtre) -->
<div id="filterBar" class="subbar" style="display:none; flex-direction:column; align-items:flex-start; gap:10px;">
  
  <!-- R√¢nd 1 -->
  <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:center; width:100%;">
    <button id="backBtn" class="ghost" onclick="goBack()">‚¨Ö Back</button>
    <label for="attrFilter">Filter by Attribute:</label>
    <select id="attrFilter"><option value="">‚Äî All ‚Äî</option></select>
  </div>
  
<!-- R√¢nd 2 -->
<div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:center; width:100%;">
  <button onclick="applyFilter('desc')">Sort üîΩ</button>
  <button onclick="applyFilter('asc')">Sort üîº</button>
  <button onclick="clearFilter()">Reset</button>
</div>

</div>



  <main>
<!-- Created -->
<section id="section-created">
  <p id="collections-hint" style="color:#9ca3af; font-size:14px; text-align:center; margin:15px 0;">
    üí° Click on a category to view its full collection. <br>
    You can then explore, filter attributes, or search by identifier.
  </p>
  <!-- Search global pe prima paginƒÉ -->
<div style="display:flex; justify-content:center; margin:15px 0;">
  <input type="text" id="globalSearchBox" placeholder="üîç Search NFT by identifier..."
         style="width:350px; max-width:90%; padding:7px 10px; border-radius:6px;
                border:1px solid #394158; background:#202840; color:#fff; font-size:14px;"
         onkeyup="globalSearch()" />
</div>

  <div id="collections" class="grid"></div>
  <div id="nfts" class="grid" style="display:none;"></div>
</section>



    <!-- Balance -->
<section id="section-balance" style="display:none; padding:20px;">
  <h2>üíº My Balance</h2>
  <p style="color:#9ca3af; font-size:14px; margin-bottom:10px;">
    Input your erd1 address <b>erd1...</b> from xPortal to check your NFTs.  
  </p>
  
<label>Wallet Address (erd1...):</label><br>
<input type="text" id="walletInput" 
       style="width:350px; padding:7px; margin-top:6px; display:block;" />


  <!-- üî• Buton global SELL chiar dacƒÉ nu s-a bƒÉgat adresƒÉ -->
<div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;">
  <button onclick="loadBalance()" style="flex:0 0 auto;">
    Load Balance
  </button>
  <button onclick="window.open('https://xoxno.com/profile','_blank')" style="flex:0 0 auto;">
    üí≥ Sell NFTs on XOXNO
  </button>
</div>


  <div id="balance-nfts" class="grid" style="margin-top:20px;"></div>
</section>

  </main>

  <div id="modal" onclick="this.style.display='none'">
    <div id="modal-content"></div>
  </div>



  <!-- ================== MARKETPLACE (cu filtre avansate) ================== -->
  <script>
    const creators = [
      "erd1tpayjteeg67rq7me94k36705dh2c077xjsmhzdmkkwjeg0w00ufsmmltyc",
      "erd1qqqqqqqqqqqqqpgqm77vv5dcqs6kuzhj540vf67f90xemypd0ufsygvnvk"
    ];

    let currentView = "collections";
	let allNFTs = [];
	let forSaleList = [];
    let allNFTsByCollection = {}; // üî• aici vom »õine toate NFT-urile preload


    async function getCollectionImage(collection) {
      try {
        const resp = await fetch(`https://api.multiversx.com/collections/${collection}/nfts?size=1`);
        const data = await resp.json();
        if (data.length > 0 && data[0].media && data[0].media[0]) return data[0].media[0].url;
      } catch(e){ console.error("fallback image", collection, e); }
      return "";
    }

// helper pt cache local
function setCache(key, data) {
  const payload = {
    time: Date.now(),
    data: data
  };
  localStorage.setItem(key, JSON.stringify(payload));
}

function getCache(key, maxAgeMs) {
  const raw = localStorage.getItem(key);
  if (!raw) return null;
  try {
    const payload = JSON.parse(raw);
    if (Date.now() - payload.time < maxAgeMs) {
      return payload.data;
    }
  } catch(e) { console.warn("Cache invalid", key, e); }
  return null;
}

async function loadCollections() {
  const container = document.getElementById("collections");
  const nftsGrid  = document.getElementById("nfts");
  container.style.display = "grid";
  nftsGrid.style.display = "none";
  document.getElementById("filterBar").style.display = "none";
  document.getElementById("backBtn").style.display = "none";

  container.innerHTML = "Loading collections...";

  // üî• verificƒÉm cache
  let all = getCache("collections", 5 * 60 * 1000); // 5 minute
  if (all) {
    console.log("Loaded collections from cache");
  } else {
    console.log("Fetching collections from API");
    all = [];
    for (const creator of creators) {
      try {
        await new Promise(r => setTimeout(r, 300));
        const resp = await fetch(`https://api.multiversx.com/collections?creator=${creator}&size=50`);
        if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
        const data = await resp.json();
        all = all.concat(data);
      } catch (err) {
        console.error("Eroare la fetch pentru creator:", creator, err);
      }
    }
    all = all.filter(col => !col.collection.startsWith("TCLSPONSOR"));
    setCache("collections", all); // üî• salvƒÉm √Æn cache
  }

  container.innerHTML = "";
  for (const col of all) {
    let image = col.assets?.pngUrl || col.assets?.svgUrl || "";
    if (!image) {
      try {
        await new Promise(r => setTimeout(r, 300));
        image = await getCollectionImage(col.collection);
      } catch (err) {
        console.warn("No image for", col.collection);
      }
    }

    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <img src="${image}" alt="${col.collection}">
      <h3>${col.name}</h3>
      <p>${col.collection}</p>
    `;
    card.onclick = () => loadNFTs(col.collection);
    container.appendChild(card);
  }

  // üî• preload toate NFT-urile o singurƒÉ datƒÉ
  await preloadAllNFTs(all);
}

async function preloadAllNFTs(collections) {
  let cache = getCache("allNFTs", 5 * 60 * 1000); // 5 minute
  if (cache) {
    console.log("Loaded ALL NFTs from cache");
    allNFTsByCollection = cache;
    return;
  }

  allNFTsByCollection = {};
  for (const col of collections) {
    try {
      console.log("Fetching NFTs from API", col.collection);
      const resp = await fetch(`https://api.multiversx.com/collections/${col.collection}/nfts?size=1000`);
      const data = await resp.json();
      allNFTsByCollection[col.collection] = data;
    } catch (err) {
      console.error("Error fetching NFTs for", col.collection, err);
    }
  }
  setCache("allNFTs", allNFTsByCollection);
}


async function loadNFTs(collection) {
  currentView = "nfts";
  const list = document.getElementById("collections");
  const grid = document.getElementById("nfts");
  list.style.display = "none";
  grid.style.display = "grid";
  document.getElementById("filterBar").style.display = "flex";
  document.getElementById("backBtn").style.display = "inline-flex";
  document.getElementById("collections-hint").style.display = "none";
  grid.innerHTML = "Loading NFTs...";

// üî• direct din cache global (preloaded)
let data = allNFTsByCollection[collection] || [];
allNFTs = data;



  allNFTs = data;

  // buton View on XOXNO
  const xoxnoLink = `https://xoxno.com/collection/${collection}`;
  const header = document.createElement("div");
  header.style.width = "100%";
  header.innerHTML = `
    <button style="margin:10px auto; display:block; background:#2ff6de; color:#161a24; 
      font-weight:bold; padding:10px 16px; border:none; border-radius:8px; cursor:pointer;" 
      onclick="window.open('${xoxnoLink}','_blank')">
      üõí View Entire Collection on XOXNO
    </button>
  `;
  grid.innerHTML = "";
  grid.appendChild(header);

 // filtre
const attrSet = new Set();
data.forEach(nft => {
  nft.metadata?.attributes?.forEach(attr => {
    if (typeof attr.value === "string" && /\+\d+/.test(attr.value)) {
      attrSet.add(attr.trait_type + " (+)");
    } else {
      attrSet.add(attr.trait_type);
    }
  });
});

const filterSelect = document.getElementById("attrFilter");
filterSelect.innerHTML = ""; // üî• fƒÉrƒÉ All
let first = true;
attrSet.forEach(attr => {
  const opt = document.createElement("option");
  opt.value = attr;
  opt.textContent = attr;
  if (first) { // üî• setƒÉm primul ca default
    opt.selected = true;
    first = false;
  }
  filterSelect.appendChild(opt);
});
filterSelect.onchange = () => applyInstantFilter();

// üî• aplicƒÉm instant filtrul pe primul atribut
applyInstantFilter();


  renderNFTs(allNFTs);
}
function goBack() {
  const collections = document.getElementById("collections");
  const nfts = document.getElementById("nfts");

  // afi»ôeazƒÉ colec»õiile, ascunde NFT-urile
  collections.style.display = "grid";
  nfts.style.display = "none";

  // ascunde bara de filtre »ôi butonul back
  document.getElementById("filterBar").style.display = "none";
  document.getElementById("backBtn").style.display = "none";
    // üî• aratƒÉ din nou hint-ul c√¢nd te √Æntorci
  document.getElementById("collections-hint").style.display = "block";

  // reset view
  currentView = "collections";
}


async function renderNFTs(nfts) {
  const container = document.getElementById("nfts");
  container.innerHTML = "Loading NFTs...";

  let selectedAttr = document.getElementById("attrFilter").value;
  if (selectedAttr && selectedAttr.endsWith(" (+)")) {
    selectedAttr = selectedAttr.replace(" (+)", "");
  }

  let cardsHtml = "";  // üî• construim tot aici

  for (const nft of nfts) {
    const plusAttr = nft.metadata?.attributes?.find(a => typeof a.value === "string" && /\+\d+/.test(a.value));
    const title = plusAttr ? plusAttr.value : nft.name;

    let attrValue = "";
    if (selectedAttr) {
      const found = nft.metadata?.attributes?.find(a => a.trait_type === selectedAttr);
      if (found) attrValue = found.value;
    }

    const nftLink = `https://xoxno.com/nft/${nft.identifier}`;

    cardsHtml += `
      <div class="card" onclick="showNFTDetails('${nft.identifier}')">
        <img src="${nft.media?.[0]?.url || ''}" alt="${nft.name}">
        <h4>${title}</h4>
        ${attrValue ? `<p style="margin-top:6px; font-size:14px; color:#2ff6de;"><b>${selectedAttr}:</b> ${attrValue}</p>` : ""}
        <button style="margin-top:10px; background:#2ff6de; color:#161a24;
          font-weight:bold; padding:8px 12px; border:none; border-radius:8px; cursor:pointer;"
          onclick="window.open('${nftLink}','_blank'); event.stopPropagation();">
          üõí View on XOXNO
        </button>
      </div>
    `;
  }

  // üî• injectƒÉm o singurƒÉ datƒÉ
  container.innerHTML = cardsHtml || `<p style="color:#9ca3af;">‚ö†Ô∏è No NFTs found.</p>`;
}


    function applyFilter(order) {
      let attr = document.getElementById("attrFilter").value;
      if (!attr) { renderNFTs(allNFTs); return; }
      if (attr.endsWith(" (+)")) attr = attr.replace(" (+)", "");

      const filtered = allNFTs.filter(nft =>
        nft.metadata?.attributes?.some(a => a.trait_type === attr)
      );

      filtered.sort((a, b) => {
        const aA = a.metadata.attributes.find(x => x.trait_type === attr);
        const aB = b.metadata.attributes.find(x => x.trait_type === attr);
        const vA = parseAttrValue(aA?.value);
        const vB = parseAttrValue(aB?.value);
        return order === "asc" ? vA - vB : vB - vA;
      });

      renderNFTs(filtered);
    }

    function applyInstantFilter() {
      let attr = document.getElementById("attrFilter").value;
      if (!attr) { renderNFTs(allNFTs); return; }
      if (attr.endsWith(" (+)")) attr = attr.replace(" (+)", "");

      const filtered = allNFTs.filter(nft =>
        nft.metadata?.attributes?.some(a => a.trait_type === attr)
      );
      renderNFTs(filtered);
    }

    function clearFilter() {
      document.getElementById("attrFilter").value = "";
      renderNFTs(allNFTs);
    }

    function parseAttrValue(val) {
      if (!val) return 0;
      if (typeof val === "string") {
        const plus = val.match(/\+(\d+)/); if (plus) return parseInt(plus[1]);
        if (val.includes("%")) return parseFloat(val.replace("%", "")) || 0;
        const num = parseFloat(val.replace(/[^\d.-]/g, ""));
        return isNaN(num) ? 0 : num;
      }
      return Number(val) || 0;
    }
async function showNFTDetails(identifier) {
  const resp = await fetch(`https://api.multiversx.com/nfts/${identifier}`);
  const nft = await resp.json();

  const modal = document.getElementById("modal");
  const content = document.getElementById("modal-content");

  // atribute
  let attributesHtml = "";
  if (nft.metadata && nft.metadata.attributes) {
    attributesHtml = `<h3>Attributes</h3><div class="attr-list">`;
    nft.metadata.attributes.forEach(attr => {
      let value = attr.value, color = "#fff";
      if (typeof value === "string" && value.trim().startsWith("-")) color = "#ff4d4d";
      else if (typeof value === "string" && value.includes("%")) color = "#2ff6de";
      attributesHtml += `
        <div class="attr-item">
          <strong>${attr.trait_type}</strong>
          <span style="color:${color}">${value}</span>
        </div>
      `;
    });
    attributesHtml += "</div>";
  }

  // link direct NFT
  const nftLink = `https://xoxno.com/nft/${nft.identifier}`;

// üî• layout pe douƒÉ coloane
content.innerHTML = `
  <div class="modal-left">
    <h2>${nft.name}</h2>
    <img src="${nft.media?.[0]?.url || ''}">
    <div class="modal-info">
      <p><b>Collection:</b> ${nft.collection}</p>
      <p><b>Identifier:</b> ${nft.identifier}</p>
      <p><b>Royalties:</b> ${nft.royalties/100}%</p>
      <p><b>Nonce:</b> ${nft.nonce}</p>
    </div>

    <!-- üëá MutƒÉm butonul aici, sub Nonce -->
    <button class="view-btn" style="margin-top:15px;" 
      onclick="window.open('${nftLink}','_blank')">
      üõí View on XOXNO
    </button>
  </div>

  <div class="modal-right">
    ${attributesHtml}
  </div>
`;


  modal.style.display = "block";
}


function showSection(sec) {
  document.getElementById("section-created").style.display = "none";
  document.getElementById("section-balance").style.display = "none";
  document.getElementById("section-" + sec).style.display = "block";

  if (sec !== "created") {
    document.getElementById("filterBar").style.display = "none";
    document.getElementById("backBtn").style.display = "none";
  }

  if (sec === "created") loadCollections();

  document.querySelectorAll("nav button").forEach(btn => btn.classList.remove("active"));
  const activeBtn = document.querySelector(`nav button[onclick="showSection('${sec}')"]`);
  if (activeBtn) activeBtn.classList.add("active");
}


async function loadBalance() {
  const addr = document.getElementById("walletInput").value.trim();
  if (!addr.startsWith("erd1")) { 
    alert("Enter valid erd1 address"); 
    return; 
  }

  const container = document.getElementById("balance-nfts");
  container.innerHTML = "Loading NFTs...";

  const resp = await fetch(`https://api.multiversx.com/accounts/${addr}/nfts?size=1000`);
  const data = await resp.json();

  // üî• filtrƒÉm doar colec»õiile TCL (numele √Æncepe cu "TCL")
  const tclNFTs = data.filter(nft => nft.collection && nft.collection.startsWith("TCL"));

  container.innerHTML = "";

  if (tclNFTs.length === 0) {
    container.innerHTML = `<p style="color:#9ca3af; font-size:14px;">‚ö†Ô∏è No TCL NFTs found in this wallet.</p>`;
    return;
  }

  // ‚úÖ afi»ôƒÉm doar NFT-urile TCL
  tclNFTs.forEach(nft => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <img src="${nft.media?.[0]?.url || ''}">
      <h4>${nft.name}</h4>
      <p style="font-size:12px; color:#2ff6de;"><b>${nft.collection}</b></p>
      <button onclick="window.open('https://xoxno.com/profile/${addr}/inventory','_blank')">
        üõí Sell on XOXNO
      </button>
    `;
    container.appendChild(card);
  });
}

    function addToSale(nft) {
      if (!forSaleList.some(n => n.identifier === nft.identifier)) {
        forSaleList.push(nft);
      }
      alert(`${nft.name} added to For Sale!`);
    }

// üî• ActiveazƒÉ doar "Created" imediat c√¢nd se √ÆncarcƒÉ pagina
window.addEventListener("DOMContentLoaded", () => {
  showSection("created");
});
function globalSearch() {
  const term = document.getElementById("globalSearchBox").value.trim().toLowerCase();
  const container = document.getElementById("collections");
  const grid = document.getElementById("nfts");

  if (!term) {
    // dacƒÉ nu existƒÉ cƒÉutare ‚Üí reafi»ôƒÉm colec»õiile
    container.style.display = "grid";
    grid.style.display = "none";
    document.getElementById("collections-hint").style.display = "block";
    return;
  }

  // cautƒÉ √Æn toate NFT-urile pre√ÆncƒÉrcate
  let results = [];
  for (const col in allNFTsByCollection) {
    results = results.concat(
      allNFTsByCollection[col].filter(nft =>
        nft.identifier.toLowerCase().includes(term)
      )
    );
  }

  if (results.length > 0) {
    container.style.display = "none";
    grid.style.display = "grid";
    document.getElementById("collections-hint").style.display = "none";
    renderNFTs(results);
  } else {
    grid.innerHTML = `<p style="color:#9ca3af; text-align:center;">‚ö†Ô∏è No NFTs found.</p>`;
  }
}


	  <!--Start of Tawk.to Script-->

var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/68e759567914761952cb4c66/1j73r9ujm';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();
<!--End of Tawk.to Script-->

	
  </script>
</body>
</html>


